(this.webpackJsonpnewchatapp=this.webpackJsonpnewchatapp||[]).push([[0],{65:function(e,t,a){e.exports=a(98)},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),s=a(16),o=(a(70),a(9)),i=a(31);a(71),a(72);var m=function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"r"},r.a.createElement("div",{className:"name"},r.a.createElement("h3",null,r.a.createElement("a",{href:"/",className:"appName"},"WebChat App")),r.a.createElement("h5",{className:"myName"},"Alamgir Akash")),r.a.createElement("nav",{className:"navber"},r.a.createElement(s.b,{to:"/",className:"ml-md-3"},"Home"),r.a.createElement(s.b,{tp:"/"},"About App"),r.a.createElement(s.b,{to:"/"},"Contact Me")))),r.a.createElement("div",{className:"login-signup"},r.a.createElement("div",{className:"button login"},r.a.createElement(s.b,{to:"/login"},r.a.createElement("h5",null,"Login"))),r.a.createElement("div",{className:"button signup"},r.a.createElement(s.b,{to:"/signup"},r.a.createElement("h5",null,"Sign Up")))))};a(77);var u=function(){var e=(new Date).getFullYear();return r.a.createElement("div",{className:"footer py-3 text-center position-fixed fixed-bottom"},r.a.createElement("h4",null,"Copyright \xa9 Alamgir Akash, ",e))};a(78);var d=function(){return r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement("div",null,r.a.createElement("div",{className:"container py-4"},r.a.createElement("div",{className:"col-md-7 bg-light"},r.a.createElement("h3",null,"About this App"),r.a.createElement("p",null,"This is an web based chatting where you can create an account and chatting with people using this app all over the world. You also can update your profile details here and your profile picture."),r.a.createElement("h4",null,"Features"),r.a.createElement("p",null,"After create your profile, you need to update your bio and profile picture by visiting the profile page. Now you only just be able to send message and images. I am working on it to add more features. You will get the update when it will be done. Happy visiting...")))),r.a.createElement(u,null))},p=a(17),g=a.n(p),f=a(22),h=a(7),b=a(130),E={ID:"id",PhotoURL:"photoUrl",Name:"nickname",Email:"email",Password:"image/",DOC:"added",Description:"mydescription",FirebaseDocumentId:"docid",UPLOAD_CHANGED:"image/",PREFIX_IMAGE:"image/",CurrentUserKey:""},v=(a(80),a(56)),N=a.n(v).a.initializeApp({apiKey:"AIzaSyDGvgSoFWuo4iA3D-oEb4wOzjS7sZA9PGM",authDomain:"chatapp-by-akash.firebaseapp.com",databaseURL:"https://chatapp-by-akash.firebaseio.com",projectId:"chatapp-by-akash",storageBucket:"chatapp-by-akash.appspot.com",messagingSenderId:"1023525867508",appId:"1:1023525867508:web:3276cb36b36b7f472af3a1",measurementId:"G-75HTRMT5LR"});function w(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(h.a)(o,2),m=i[0],u=i[1],d=function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,N.auth().signInWithEmailAndPassword(c,m).then(function(){var t=Object(f.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=a.user)){t.next=5;break}return t.next=4,N.firestore().collection("users").where("id","==",n.uid).get().then((function(e){e.forEach((function(e){var t=e.data();localStorage.setItem(E.FirebaseDocumentId,e.id),localStorage.setItem(E.ID,t.id),localStorage.setItem(E.Name,t.name),localStorage.setItem(E.Email,t.email),localStorage.setItem(E.Password,t.password),localStorage.setItem(E.PhotoURL,t.URL),localStorage.setItem(E.Description,t.description)}))}));case 4:e.history.push("./chat");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){document.getElementById("1").innerHTML="Incorrect email or password"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){localStorage.getItem(E.ID)&&e.history.push("./chat")}),[]),r.a.createElement("div",{className:"text-center mx-auto login-form"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"signup-header py-4 text-white"},r.a.createElement("h4",null,"Welcome to Akash's live WebChat App"),r.a.createElement("span",null,"Please log in with your email and password "),r.a.createElement("div",{className:"my-4"},r.a.createElement(s.b,{to:"/",className:" home-button btn-lg btn-success"},"Go back to Home"))),r.a.createElement("form",{onSubmit:function(e){return d(e)},className:"py-3 mx-auto col-md-6 col-11 signin-from"},r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"email",type:"email",required:!0,label:"Email",onChange:function(e){return l(e.target.value)}}),r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"password",type:"password",required:!0,label:"Password",onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{className:"my-3 p-2",name:"remember",type:"checkbox"}),r.a.createElement("label",{htmlFor:"remember",className:"mr-auto"},"Remember me"),r.a.createElement("p",{className:"text-danger",id:"1"}),r.a.createElement("button",{type:"submit",className:"signup-button"},"LOG IN"),r.a.createElement("p",{className:"text-danger",id:"1"}),r.a.createElement("div",null,r.a.createElement("p",null,"Didn't have a accout?"," ",r.a.createElement(s.b,{to:"/signup",className:"text-info"},"Sign Up")," ","here")))))}a(91);function y(e){var t=Object(n.useState)(null),a=Object(h.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(h.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(h.a)(d,2),v=p[0],w=p[1],y=function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),a.target.elements.password.value===a.target.elements.confirmPassword.value){t.next=4;break}return alert("Confirm Password and Password must be the same"),t.abrupt("return");case 4:try{N.auth().createUserWithEmailAndPassword(c,v).then(function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N.firestore().collection("users").add({name:m,id:a.user.uid,email:c,password:v,URL:"",description:"",messages:[{notificationid:"",number:0}]}).then((function(t){localStorage.setItem(E.ID,a.user.uid),localStorage.setItem(E.Name,m),localStorage.setItem(E.Email,c),localStorage.setItem(E.Password,v),localStorage.setItem(E.PhotoURL,""),localStorage.setItem(E.UPLOAD_CHANGED,"state_changed"),localStorage.setItem(E.Description,""),localStorage.setItem(E.FirebaseDocumentId,t.id),l(null),u(""),w(""),e.history.push("/chat")})).catch((function(e){console.log("Error while signing up",e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(n){document.getElementById("1").innerHTML="Error while signing up. Please try again"}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"text-center mx-auto"},r.a.createElement("div",{className:"signup-header py-4"},r.a.createElement("h3",null,"Welcome to Sign Up page"),r.a.createElement("h5",{className:"mb-4"},"You can use all the features of this app by signing up"),r.a.createElement(s.b,{to:"/",className:"my-4 home-button btn-lg btn-success"},"Go back to Home")),r.a.createElement("form",{onSubmit:function(e){return y(e)},className:"py-3 mx-auto col-md-7 col-11 signin-from"},r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"displayName",type:"text",onChange:function(e){return u(e.target.value)},required:!0,label:"Name"}),r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"email",type:"email",required:!0,label:"Email",onChange:function(e){return l(e.target.value)}}),r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"password",type:"password",required:!0,onChange:function(e){return w(e.target.value)},label:"Password (At least 6 digits or characters)"}),r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",name:"confirmPassword",type:"password",required:!0,label:"Confirm Password"}),r.a.createElement("p",{className:"text-danger",id:"1"}),r.a.createElement("button",{type:"submit",className:"signup-button sign px-4"},r.a.createElement("h5",{className:"text-center"},"SIGN UP")),r.a.createElement("div",null,r.a.createElement("p",null,"Already have a account?"," ",r.a.createElement(s.b,{to:"/login",className:"text-primary mx-2"},"Sign In"),"here."))))))}var S=a(131);a(92),a(53),a(93);var I=function(e){if(0===e)return r.a.createElement("small",null,"Just now");var t=new Date,a=Math.floor((t-1e3*e.seconds)/1e3),n=Math.floor(a/3600),c=Math.floor(a/60),l=a,s=new Date(1e3*e.seconds);return s=s.toLocaleString(),n>=24?r.a.createElement("small",null,s):n?r.a.createElement("small",null,n," hours ago "):c?r.a.createElement("small",null,c," minutes ago"):l?r.a.createElement("small",null,l," seconds ago"):void 0},x=function(e){var t,a=e.msg,n=localStorage.getItem(E.ID);if(!a)return null;t=0===a.ids.indexOf(n)?"mine":"others";var c=I(a.timestamp||0);return r.a.createElement("div",{onClick:function(){document.getElementById("".concat(a.timestamp).concat(a.timestamp)).classList.toggle("d-none")},className:"msg ".concat(t)},a.text?r.a.createElement("p",{className:"my-0"},a.text):null,a.url?r.a.createElement("img",{src:a.url,className:"message__image",alt:"Image Load Failed"}):null,r.a.createElement("small",{id:"".concat(a.timestamp).concat(a.timestamp),className:"d-none my-0"},c))},O=a(128),j=a(129),k=a(47);a(94);var U=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(null),o=Object(h.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(null),d=Object(h.a)(u,2),p=d[0],b=d[1],v=null,w=localStorage.getItem(E.ID),y=N.storage(),S=function(){var t=Object(f.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.target.files||!a.target.files[0]){t.next=8;break}if(0===a.target.files[0].type.toString().indexOf("image")){t.next=4;break}return e.showToast(0,"This file is not an image"),t.abrupt("return");case 4:m(a.target.files[0]),b(URL.createObjectURL(a.target.files[0])),t.next=9;break;case 8:e.showToast(0,"Something wrong with image");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){m(null),l("")}),[e.currentPairUser]);var I=function(){var t=Object(f.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i||c.trim()){t.next=2;break}return t.abrupt("return");case 2:i?(a=i.name+" "+Math.floor(1e3*Math.random()),y.ref("images/".concat(a)).put(i).on("state_changed",null,(function(e){console.log(e)}),(function(){y.ref("images").child(a).getDownloadURL().then((function(t){N.firestore().collection("messages").add({ids:[w,e.currentPairUser.id],text:c.trim(),url:t,timestamp:k.firestore.FieldValue.serverTimestamp()}).then((function(){m(null),l("")})).catch((function(e){console.log(e)}))}))}))):N.firestore().collection("messages").add({ids:[w,e.currentPairUser.id],text:c.trim(),url:null,timestamp:k.firestore.FieldValue.serverTimestamp()}).then((function(){m(null),l("")})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"image ".concat(p?"d-flex":"d-none align-items-center")},r.a.createElement("img",{src:p,alt:""}),r.a.createElement("button",{onClick:function(){b(null),m(null)},className:" ml-2"},"x")),r.a.createElement("from",{id:"from"},r.a.createElement(O.a,{className:"icOpenGallery",onClick:function(){v.click()}}),r.a.createElement("input",{ref:function(e){v=e},className:"viewInputGallery",accept:"images/",type:"file",onChange:S}),r.a.createElement("input",{className:"viewInput mx-2",value:c,placeholder:"Type a message",onChange:function(e){l(e.target.value)}}),r.a.createElement("button",{className:"sendButton",type:"submit",onClick:I},r.a.createElement(j.a,{className:"icSend"}))))};a(95);var P=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],s=localStorage.getItem(E.Name),o=localStorage.getItem(E.ID),i=e.currentPairUser;return Object(n.useEffect)((function(){N.firestore().collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){l(e.docs.map((function(e){var t=e.data();return t.ids.includes(i.id)&&t.ids.includes(o)?t:null})))}))}),[i]),r.a.createElement("div",{className:"viewChat"},r.a.createElement("div",{className:"headerChatBoard"},i.URL?r.a.createElement("img",{className:"w-25",alt:"/static/images/avatar/1.jpg",src:i.URL}):r.a.createElement(S.a,{className:"avatar",alt:s,src:"/static/images/avatar/1.jpg"}),r.a.createElement("div",{className:"text-left ml-3"},r.a.createElement("h5",{className:"my-0"},i.name),r.a.createElement("p",{className:"my-0"},i.description))),r.a.createElement("div",{className:"viewListContentChat"},c.map((function(e){return r.a.createElement(x,{msg:e})}))),r.a.createElement("div",{className:"imageshowbox d-none"},r.a.createElement("img",{id:"imageshowbox",alt:""})),r.a.createElement("div",{className:"viewBottom"},r.a.createElement(U,{showToast:e.showToast,currentPairUser:i})))};a(96);var C=function(e){return r.a.createElement("div",{className:"text-center welcome"},e.currentUserPhoto?r.a.createElement("img",{className:"welcome__image",alt:"/static/images/avatar/1.jpg",src:e.currentUserPhoto}):r.a.createElement(S.a,{className:"avatar",alt:e.currentUser,src:"/static/images/avatar/1.jpg"}),r.a.createElement("h5",null," Hello ",e.currentUser,"!! Welcome to this WebChat App."),r.a.createElement("h6",null,"Let's connect to the world"))};var L=function(e){localStorage.getItem(E.Name)||e.history.push("/");var t=localStorage.getItem(E.Name),a=localStorage.getItem(E.ID),c=localStorage.getItem(E.PhotoURL),l=Object(n.useState)(""),s=Object(h.a)(l,2),o=s[0],i=s[1],m=Object(n.useState)(null),u=Object(h.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)([]),f=Object(h.a)(g,2),b=f[0],v=f[1],w=[],y=function(){e.history.push("/profile")};return Object(n.useEffect)((function(){N.firestore().collection("users").onSnapshot((function(e){e.docs.map((function(e){var t=e.data();t.id!==a&&t.name.toLowerCase().includes(o.toLocaleLowerCase())&&w.push(t)})),v(w)}))}),[o]),r.a.createElement("div",{className:"root bg-dark"},r.a.createElement("div",{className:"body container"},r.a.createElement("div",{className:"d-flex row"},r.a.createElement("div",{className:"col-md-4 usersList d-flex flex-column",id:"usersList"},r.a.createElement("div",{className:" w-100 d-flex justify-content-between my-2 px-2 chatlist-header"},c?r.a.createElement("img",{className:"ProfilePicture",alt:"/static/images/avatar/1.jpg",src:c,onClick:y}):r.a.createElement(S.a,{className:"avatar",alt:t,src:"/static/images/avatar/1.jpg",onClick:y}),r.a.createElement("button",{className:"btn h-50 my-auto btn-danger",onClick:function(){window.confirm("Are you really want to logout?")&&(N.auth().signOut(),e.history.push("/"),localStorage.clear())}},"Logout")),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"w-100 my-3 d-flex text-info align-items-center"},r.a.createElement("i",{className:"fa fa-search fa-2x mr-2"}),r.a.createElement("input",{className:"py-2 search-input",type:"text",value:o,placeholder:"Search User",onChange:function(e){i(e.target.value)}}))),r.a.createElement("div",{className:"d-block"},b.map((function(t){return r.a.createElement("button",{id:t.id,className:"w-100 my-2 px-2 py-1 text-white users",onClick:function(){p(t),window.screen.width<600&&e.history.push("./chatbox"),localStorage.setItem("currentPairUser",JSON.stringify(t))}},r.a.createElement("img",{className:" w-25",src:t.URL,alt:""}),r.a.createElement("div",{className:""},r.a.createElement("h5",{className:"textItem"},t.name)))})))),r.a.createElement("div",{className:"col-md-8 d-md-block d-none",id:"chatbox"},d?r.a.createElement(P,{currentPairUser:d,showToast:e.showToast}):r.a.createElement(C,{currentUser:t,currentUserPhoto:c})))))},D=(a(97),a(58)),A=a.n(D);var T=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(null),o=Object(h.a)(s,2),i=o[0],m=o[1],u=[localStorage.getItem(E.FirebaseDocumentId),localStorage.getItem(E.ID),localStorage.getItem(E.Name),localStorage.getItem(E.Description),localStorage.getItem(E.PhotoURL)],d=u[0],p=u[1],g=u[2],f=u[3],v=u[4],w=Object(n.useState)(g),y=Object(h.a)(w,2),I=y[0],x=y[1],O=Object(n.useState)(f),j=Object(h.a)(O,2),k=j[0],U=j[1],P=Object(n.useState)(v),C=Object(h.a)(P,2),L=C[0],D=C[1],T=null,R=function(t,a){var n;n=t?{name:I,description:k,URL:a}:{name:I,description:k},N.firestore().collection("users").doc(d).update(n).then((function(n){localStorage.setItem(E.Name,I),localStorage.setItem(E.Description,k),t&&localStorage.setItem(E.PhotoURL,a),l(!1),e.showToast(1,"Successfully Updated")}))};return r.a.createElement("div",{className:"container text-center"},r.a.createElement("h4",null,"PROFILE"),r.a.createElement("div",{className:"change-image"},L?r.a.createElement("img",{className:"imageInput",alt:"icon gallery",src:L,onClick:function(){T.click()}}):r.a.createElement(S.a,{className:"avatar",alt:g,src:"/static/images/avatar/1.jpg",onClick:function(){T.click()}}),r.a.createElement("input",{ref:function(e){T=e},accept:"image/*",className:"viewInputFile d-none",type:"file",onChange:function(t){if(t.target.files&&t.target.files[0]){if(0!==t.target.files[0].type.toString().indexOf("image"))return void e.showToast(0,"This file is not an image");m(t.target.files[0]),D(URL.createObjectURL(t.target.files[0]))}else e.showToast(0,"Something wrong with image")}}),r.a.createElement("p",null,"You can change your profile picture by clicking on picture.")),r.a.createElement("form",{className:"col-md-6 mx-auto my-5"},r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",type:"text",label:"Name",value:I,onChange:function(e){return x(e.target.value)}}),r.a.createElement(b.a,{id:"standard-basic",className:"form-control mb-3",type:"text",value:k,onChange:function(e){return U(e.target.value)},label:"About Me"}),r.a.createElement("button",{onClick:function(){return function(){if(l(!0),i){var t=N.storage().ref().child(p).put(i);t.on("state_changed",null,(function(t){l(!1),e.showToast(0,t.message)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){l(!1),console.log(e),R(!0,e)}))}))}else l(!1),R(!1,null)}()},type:"button",className:" btn btn-success mx-0 my-4"},"Update"),r.a.createElement("button",{type:"button",onClick:function(){e.history.push("/chat")},className:" btn-md-lg btn btn-primary ml-md-4 ml-2"},"Go Back")),c?r.a.createElement("div",null,r.a.createElement(A.a,{type:"spin",color:"#203152",height:"3%",width:"3%"})):null)};var R=function(){var e=JSON.parse(localStorage.getItem("currentPairUser"));return r.a.createElement("div",null,r.a.createElement(P,{currentPairUser:e}))};var F=function(){function e(e,t){switch(e){case 0:i.b.warning(t);break;case 1:i.b.success(t)}}return r.a.createElement("div",null,r.a.createElement(i.a,{autoClose:2e3,hideProgressBar:!0,position:i.b.POSITION.TOP_CENTER}),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(d,e)}}),r.a.createElement(o.a,{path:"/login",render:function(t){return r.a.createElement(w,Object.assign({showToast:e},t))}}),r.a.createElement(o.a,{path:"/signup",render:function(t){return r.a.createElement(y,Object.assign({showToast:e},t))}}),r.a.createElement(o.a,{path:"/chat",render:function(t){return r.a.createElement(L,Object.assign({showToast:e},t))}}),r.a.createElement(o.a,{path:"/profile",render:function(t){return r.a.createElement(T,Object.assign({showToast:e},t))}}),r.a.createElement(o.a,{path:"/chatbox",component:function(e){return r.a.createElement(R,e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(s.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.e4ee9ee0.chunk.js.map